<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Back To Work</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      :root {
        color-scheme: light dark;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        padding: 8px 10px 10px;
        min-width: 280px;
        max-width: 340px;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;
        background: #020617;
        color: #e5e7eb;
      }
      .shell {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      .header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 4px;
      }
      .title {
        font-size: 14px;
        font-weight: 600;
      }
      .badge {
        font-size: 10px;
        padding: 2px 6px;
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 184, 0.7);
        color: #e5e7eb;
      }
      .mode-chip {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 6px 10px;
        border-radius: 999px;
        background: rgba(15, 23, 42, 0.9);
        border: 1px solid rgba(51, 65, 85, 0.9);
        font-size: 11px;
        margin-bottom: 4px;
      }
      .mode-dot {
        width: 8px;
        height: 8px;
        border-radius: 999px;
        background: #22c55e;
      }
      .meta {
        font-size: 11px;
        color: #9ca3af;
        margin-bottom: 6px;
      }
      .mode-switch {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 4px;
        border-radius: 999px;
        padding: 4px 6px;
        background: rgba(15, 23, 42, 0.9);
        border: 1px solid rgba(31, 41, 55, 0.9);
        margin-bottom: 4px;
      }
      .mode-switch button {
        all: unset;
        flex: 1;
        max-width: 56px;
        height: 36px;
        border-radius: 999px;
        cursor: pointer;
        color: rgba(248, 250, 252, 0.5);
        display: inline-flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: transparent;
        transition: background 0.18s ease, color 0.18s ease, transform 0.18s ease;
      }
      .mode-switch button.is-active {
        background: rgba(148, 163, 184, 0.2);
        color: #f9fafb;
        transform: translateY(-1px);
      }
      .mode-info {
        margin-bottom: 6px;
      }
      .mode-info-title {
        font-size: 11px;
        font-weight: 500;
        margin-bottom: 2px;
      }
      .mode-info-desc {
        font-size: 10px;
        color: #9ca3af;
      }
      .mode-icon {
        width: 14px;
        height: 14px;
        display: block;
        stroke: currentColor;
        fill: none;
      }
      .mode-caption {
        font-size: 9px;
        letter-spacing: 0.02em;
        text-transform: uppercase;
        opacity: 0.8;
      }
      .section-title {
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        color: #6b7280;
        margin-bottom: 4px;
      }
      .sites-list {
        margin-top: 2px;
        border-radius: 10px;
        border: 1px solid rgba(31, 41, 55, 0.9);
        background: rgba(15, 23, 42, 0.9);
        padding: 6px 8px;
        font-size: 11px;
        max-height: 80px;
        overflow: auto;
      }
      .chip {
        display: inline-flex;
        align-items: center;
        border-radius: 999px;
        padding: 3px 8px;
        background: rgba(30, 64, 175, 0.18);
        color: #e5e7eb;
        margin: 2px;
      }
      .footer {
        margin-top: 8px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 10px;
        color: #6b7280;
      }
      .link-button {
        all: unset;
        cursor: pointer;
        font-size: 10px;
        color: #93c5fd;
      }
      .link-button:hover {
        text-decoration: underline;
      }
    </style>
  </head>
  <body>
    <div class="shell">
      <header class="header">
        <div class="title">Back To Work</div>
        <div class="badge">MVP · Local only</div>
      </header>

      <div id="modeChip" class="mode-chip">
        <span class="mode-dot" id="modeDot"></span>
        <span id="modeLabel">Detecting mode…</span>
      </div>

      <div id="meta" class="meta">Focused work today: <span id="todayMinutes">0</span> min</div>

      <div class="mode-switch" id="modeSwitch">
        <button type="button" data-mode="work_only" title="Work only">
          <svg class="mode-icon" viewBox="0 0 20 20" aria-hidden="true">
            <rect x="4" y="7" width="12" height="8" rx="2" />
            <path d="M7 7V6a3 3 0 0 1 3-3a3 3 0 0 1 3 3v1" />
          </svg>
          <span class="mode-caption">Work</span>
        </button>
        <button type="button" data-mode="normal_day" title="Normal day">
          <svg class="mode-icon" viewBox="0 0 20 20" aria-hidden="true">
            <rect x="3" y="5" width="14" height="12" rx="2" />
            <path d="M6 3v3M14 3v3M4 9h12" />
          </svg>
          <span class="mode-caption">Day</span>
        </button>
        <button type="button" data-mode="low_focus" title="Low focus">
          <svg class="mode-icon" viewBox="0 0 20 20" aria-hidden="true">
            <rect x="4" y="8" width="12" height="4" rx="2" />
            <rect x="5" y="9" width="5" height="2" rx="1" />
          </svg>
          <span class="mode-caption">Low</span>
        </button>
        <button type="button" data-mode="no_work" title="No work today">
          <svg class="mode-icon" viewBox="0 0 20 20" aria-hidden="true">
            <circle cx="10" cy="10" r="6" />
            <path d="M7 7l6 6" />
          </svg>
          <span class="mode-caption">Off</span>
        </button>
        <button type="button" data-mode="auto" title="Automatic">
          <svg class="mode-icon" viewBox="0 0 20 20" aria-hidden="true">
            <path d="M4 11a6 6 0 0 1 10-4M16 9v-4M16 5h-4" />
            <path d="M6 12h3l1 3l2-8l2 5h2" />
          </svg>
          <span class="mode-caption">Auto</span>
        </button>
      </div>

      <div class="mode-info">
        <div id="modePresetLabel" class="mode-info-title">Normal day</div>
        <div id="modePresetDesc" class="mode-info-desc">
          Follow your work schedule and use gentle friction on non-work sites.
        </div>
      </div>

      <div>
        <div class="section-title">Work sites</div>
        <div id="sites" class="sites-list">
          <span class="chip">Loading…</span>
        </div>
      </div>

      <footer class="footer">
        <button class="link-button" id="openOptions">Open settings</button>
        <span>Built by dashweb.agency</span>
      </footer>
    </div>

    <script src="popup.js"></script>
  </body>
</html>

